# üöÄ Quick Setup: Free Hugging Face Background Removal

## ‚è±Ô∏è 5-Minute Setup Guide

### **Step 1: Get Your FREE Hugging Face Token**

1. **Sign up** (if you don't have an account):
   - Go to: https://huggingface.co/join
   - Sign up with email or GitHub (100% free, no credit card)

2. **Generate API Token**:
   - Go to: https://huggingface.co/settings/tokens
   - Click **"New token"** button
   - Give it a name like "bowling-app-background-removal"
   - Select **"Read"** access (default)
   - Click **"Generate token"**
   - Copy the token (starts with `hf_`)

---

### **Step 2: Add Token to Your Project**

#### **For Hostinger/PHP Backend:**

Edit `public/env.php` and replace this line:
```php
'HUGGINGFACE_API_TOKEN' => '', // Add your free Hugging Face token here
```

With your token:
```php
'HUGGINGFACE_API_TOKEN' => 'hf_YOUR_TOKEN_HERE',
```

#### **For Local Development:**

Create `.env.local` file in project root:
```bash
HUGGINGFACE_API_TOKEN=hf_YOUR_TOKEN_HERE
```

---

### **Step 3: Upload New Files**

Upload these files to your Hostinger account:

1. **`public/api/remove-bg-huggingface.php`** (NEW)
   - Location: Upload to `/public_html/api/` folder
   - This handles the free background removal

2. **`lib/utils/geminiService.ts`** (UPDATED)
   - Already integrated with Hugging Face

Make sure the PHP file has proper permissions (644 or 755).

---

### **Step 4: Test It**

#### **Test the API Endpoint:**

**Option A: Browser Test**
```
https://your-domain.com/api/remove-bg-huggingface.php
```

Should return:
```json
{
  "success": true,
  "php_executed": true,
  "hasToken": true,
  "service": "Hugging Face BRIA-RMBG-1.4"
}
```

**Option B: Command Line Test**
```bash
curl https://your-domain.com/api/remove-bg-huggingface.php
```

---

### **Step 5: Generate a Torso Image**

1. Go to your app
2. Upload a video or image with a person
3. Trigger torso generation
4. Check browser console for:
   ```
   [BG REMOVAL] Starting background removal with free APIs...
   [BG REMOVAL] Trying Hugging Face API (free)...
   [BG REMOVAL] ‚úÖ Success with Hugging Face API (free)
   ```

---

## üéâ **That's It!**

You're now using **FREE unlimited background removal** with Hugging Face!

---

## üîç **Troubleshooting**

### **"Model is loading" Error**
- **First time use:** Hugging Face models may take 20-30 seconds to load initially
- **Solution:** Wait 20 seconds and try again
- **After first load:** Subsequent requests will be instant

### **"hasToken: false"**
- **Problem:** Token not configured correctly
- **Solution:** 
  1. Double-check you added the token to `public/env.php`
  2. Make sure token starts with `hf_`
  3. No quotes or extra spaces
  4. Restart your server

### **PHP File Returns Source Code**
- **Problem:** PHP not executing, returning raw PHP code
- **Solution:**
  1. Make sure file is named `.php` not `.txt`
  2. Upload to correct directory: `public_html/api/`
  3. Check file permissions (644 or 755)
  4. Contact Hostinger support to ensure PHP is enabled

### **"Rate limit exceeded"**
- **Problem:** You've exceeded the ~1,000 requests/day limit
- **Solution:** 
  1. Wait a few hours (limit resets)
  2. System automatically falls back to Remove.bg (50 free/month)
  3. For higher volume, consider paid alternatives

### **Background Removal Not Working**
1. Check console logs in browser (F12 ‚Üí Console)
2. Look for error messages starting with `[BG REMOVAL]`
3. Verify both API endpoints are accessible
4. Test direct API call with curl

---

## üìä **What Happens Behind the Scenes**

```
Image Generated by Gemini
         ‚Üì
Try Hugging Face API (FREE, unlimited*)
         ‚Üì
Success? ‚Üí Use transparent image ‚úÖ
         ‚Üì
Failed? ‚Üí Try Remove.bg (50 free/month)
         ‚Üì
Success? ‚Üí Use transparent image ‚úÖ
         ‚Üì
Failed? ‚Üí Use original image with background
```

---

## üí° **Pro Tips**

1. **Hugging Face is primary:** 99% of requests will use the free Hugging Face API
2. **Remove.bg is backup:** Only used if Hugging Face fails
3. **First request may be slow:** Model loading takes ~20 seconds first time
4. **Cache is your friend:** Subsequent requests are fast
5. **Monitor usage:** Check console logs to see which service is being used

---

## üÜò **Need Help?**

1. **Check console logs** in browser DevTools (F12)
2. **Test API endpoint** directly in browser
3. **Verify token** is correct and has "Read" permission
4. **Review** `FREE_BACKGROUND_REMOVAL_GUIDE.md` for detailed documentation

---

## üéØ **Cost Savings**

- **Before:** Remove.bg = $0.20 per image (after 50 free)
- **After:** Hugging Face = $0.00 per image
- **Savings:** 100% cost reduction! üí∞

---

**Questions?** Everything is already integrated and ready to use once you add your Hugging Face token!

